\documentclass[a4paper]{article}

%% Language and font encodings
\usepackage[frenchb]{babel}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{minted} %compiler avec la commande -shell-escape
\usepackage{graphicx}

%% Todo List
\usepackage{enumitem,amssymb}
\newlist{todolist}{itemize}{2}
\setlist[todolist]{label=$\square$}
\usepackage{pifont}
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%
\newcommand{\done}{\rlap{$\square$}{\raisebox{2pt}{\large\hspace{1pt}\cmark}}%
\hspace{-2.5pt}}
\newcommand{\wontfix}{\rlap{$\square$}{\large\hspace{1pt}\xmark}}

%% Sets page size and margins
\usepackage[a4paper,top=3cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}
\setlength{\parskip}{.5em}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
\definecolor{lightgray}{gray}{.95}

%-------------------------------------------------------------------------------
% TITLE PAGE
%-------------------------------------------------------------------------------

\begin{document}

\title
{
	\HRule \\ [0.5cm]
	\LARGE \textbf{\uppercase{Projet technologique}}
	\HRule \\ [0.5cm]
}

\date{}

\author
{
	\LARGE{Université de Bordeaux} \\
	\\
        Enzo PERUZZETTO \\
        Michel Massamiri\\
        Matthias Paulmier\\
}

\begin{document}

\null  % Empty line
\nointerlineskip  % No skip for prev line
\vfill
\let\snewpage \newpage
\let\newpage \relax
\maketitle
\let \newpage \snewpage
\vfill
\break % page break
%-------------------------------------------------------------------------------
% Table des matières
%-------------------------------------------------------------------------------

\tableofcontents
\newpage

%-------------------------------------------------------------------------------
% Présentation du projet - Introduction
%-------------------------------------------------------------------------------

\section{Présentation du projet}
	\emph{ Web et base de données : un outil pour les seniors et personnes handicapées}\\

Les collectivités locales, les mairies par exemple, communiquent largement via Internet. Cependant des publics comme les séniors ou les personnes handicapées n'ont pas un accès simple aux informations spécifiques qui les intéressent sur les sites de ces collectivités et il est souhaitable d'enrichir les services qui leur sont proposés sur le web.\\

L'objectif du projet est donc de créer une base d’informations accessible et intuitive permettant aux personnes les moins à l’aise avec l’outil informatique de s'informer et de trouver une réponse à leurs questions. Voici des exemples de fonctionnalités : accès à l’ensemble des services pour les séniors et les personnes handicapées (aides à domicile, soins infirmiers, loisirs,. . . ), visualisation des services disponibles en les géolocalisant, accès à un espace où les personnes âgées ou leurs familles pourraient poser leurs questions, collecte et partage des propositions de bénévoles (petits travaux, aide aux transports, etc). En pratique, le projet consiste à développer un prototype livrable de site Internet accompagné de sa base de données.

\newpage
%---------------------------------------------------------------------------------
%  Cahier des Charges
%---------------------------------------------------------------------------------
\section{Cahier des Charges}

\subsection{Présentation de l'entreprise}

La mairie de Bègles aimerait mettre en place sur leur site internet une application web permettant aux personnes agées et handicapés de pouvoir obtenir des informations sur certains services et (questionnement?).

\subsection{besoins de la mairie}

Mise en ligne d’une base d'informations recensant l’ensemble des services pour les séniors et les personnes handicapées:
\begin{itemize}
\item aides et accompagnement à domicile
\item soins infirmiers
\item partage services
\item loisirs\\
\end{itemize}


Reliée au site internet de la ville, cette base de données permettrait de visualiser les services disponibles en les géolocalisants.\\

Créer un espace où les personnes âgées ou leurs familles pourraient poser leurs questions.
Créer un espace pour rassembler les propositions des habitants de la commune qui souhaiteraient s’investir dans le bénévolat et notamment aider les plus âgées via des visites de courtoisie, de l’aide aux petits travaux, de l’aides aux transports, etc.

\subsection{objectifs}

Pour répondre à ses besoins, nous avons pensé aux services suivants:

Créer une base d’informations accessible et intuitive permettant aux personnes les moins à l’aise avec l’outil informatique de trouver une réponse à leurs questions.
Créer un outil pour les agents du service leur permettant de répertorier l’offre à destination de ce public et de suivre son évolution dans la commune.\\

\subsection{besoin fonctionnel}


\subsubsection{base de donnée }

Une base de donnée MySQL.
\begin{itmesize}
\item Une table de users.
\item Une table de services.
\item Une table de questions.
\item Une table de reponse.
\end{itemsize}

\subsubsection{Une page d'identification }

Cette page sera de la forme d'un formulaire, elle aura les fonctions suivantes:
\begin{itemsize}
\item Une fonction qui permet l'authentification d'un utilisateur.
\item Une fonction qui permet l'inscription d'un utilisateur.
\item Une fonction qui vérifie si les champs sont bien remplis et bien écrit.
\end{itemsize}

\subsubsection{FAQ }

Se service permettra aux utilisateurs de poser et répondre à certaines questions.
Elle aura donc les fonctions suivante:
\begin{ itemsize }
\item Une fonction permettant de poser une question dans le FAQ.
\item Une fonction permettant de valider la question poser.
\item Une fonction permettant de repondre à la question.
\end{ itemsize}

\subsubsection{Listes des services disponnibles }

\subsubsection{Listes des utilisateurs}

\subsubsection{Inscription}

\subsubsection{Interface admin}

%(organisation des pages PHP et SQL)
%Décrire les pages accessibles, comment elles s’organisent (classes PHP ?), quelle est la bdd associée:
%Publique Services disponibles
%Admin Services disponibles
%Publique Questions aux agents
%Admin Questions aux agents
%Publique Propositions (modéré)
%Admin Propositions
%modularite cote admin
\newpage
%---------------------------------------------------------------------------------
% Descriptif de la base de donnée
%---------------------------------------------------------------------------------
\section{Descriptif de la base de donnée}



%-------------------------------------------------------------------------------
% Le service d'inscription et d'identification
%-------------------------------------------------------------------------------
\section{L'inscription et l'identification}

%-------------------------------------------------------------------------------
% Le service liste de services
%-------------------------------------------------------------------------------
\section{Liste des services}

%-------------------------------------------------------------------------------
% Le service FAQ
%-------------------------------------------------------------------------------
\section{La FAQ}

Le service FAQ permet aux client de poser des questions et répondres aux questions déjà posées.
Pour cela, le service est codé avec plusieurs fichiers qui soit:
\begin{itemsize}
\item Permet l'accés à la base de donnée et de récupéré les données nécéssaires à se service.
\item Permet Le contrôle entre les données et la vue du client.
\item Permet d'afficher la vue chez le client.
\end{itemsize}

\subsection{Les fichiers de modèles}
\subsubsection{classFaq.php}
\begin{minted}{PHP}
  <?php
        include_once('classQuestion.php');
	include_once('classReponse.php');

	class FAQ{
		private $question;
		private $reponse;
		
		public function __construct(){
			$this->question = array();//tableau de question
			$this->reponse  = array();//tableau de réponse
		}
		
		[...]
        ?>
\end{minted}
\subsubsection{classQuestion.php}
\begin{minted}{php}
<?php 
	class Question{
		private $id_question;
		private $auteur;
		private $question;
		private $date;
		
		public function __construct($id_question, $auteur, $question, $date){
			$this->id_question = $id_question;
			$this->auteur = $auteur;
			$this->question = $question;
			$this->date = $date;
		}

                [...]
?>
\end{minted}
\subsubsection{classReponse.php}
\begin{minted}{php}
<?php
	class Reponse{
		private $id_reponse;
		private $id_question;
		private $auteur;
		private $date;
		private $reponse;
		
		public function __construct($id_reponse, $id_question, $auteur, $date, $reponse){
			$this->id_reponse = $id_reponse;
			$this->id_question = $id_question;
			$this->auteur = $auteur;
			$this->date = $date;
			$this->reponse = $reponse;
		}
                 [...]
?>
\end{minted}
\subsubsection{modFaq.php}
\begin{minted}{php}
<?php
// Accès aux données
include_once('classFaq.php');
include_once('conn.php');

$conn = connectDB();
$faq = new FAQ();
$arrayquestion = array();
$arrayReponse = array();

//question
$query = "SELECT * FROM PrTec_Question";
$stmt = $conn->query($query);
while( $data = $stmt->fetch()){
	$question = new Question($data['id_question'], $data['auteur'], $data['question'], $data['date']);
	$faq->addQuestion($question);
}


//reponse
$query = "SELECT * FROM PrTec_Reponse";
$stmt = $conn->query($query);
while( $data = $stmt->fetch()){
	$reponse = new Reponse($data['id_reponse'], $data['id_question'], $data['auteur'], $data['date'], $data['reponse']);
	$faq->addReponse($reponse);
}



?>
\end{minted}
\subsection{Les fichiers de Control}

\subsubsection{FAQ.php}


\subsection{Les fichiers de Vues}

\subsubsection{vueFaq.php}
\begin{minted}{php}
  <?php
  foreach ($faq->getArrayQ() as $question){
    if( isset($question)){
      echo '<div class="panel panel-primary">';
      echo '<div class="panel-heading">Question de '.$question->getAuteur().': '.$question->getQuestion().' Poster le '.$question->getdate().'</p></div>';
      echo '<div class="panel-body">';
      foreach ($faq->getReponseQuestion($question) as $reponse){
	if(isset($reponse)){
	  echo '<h3>Reponse de '.$reponse->getAuteur().':</h3>';
	  echo '<p>'.$reponse->getReponse().'<br />';
	  echo 'repondu le '.$reponse->getdate().'</p>';
          if($_SESSION['droit'] == 1)
          echo '<a href="../controller/supprimerQRU.php?id='.$reponse->getReponseID().'&value=1" > <button type="submit" class="btn btn-danger"> supprimer la réponse</button></a>';
	  
	}
      }
      echo '<form method="POST" action="../controller/Repondre.php?id='.$question->getID().'">';
      echo '<textarea name="description" placeholder="Poser vôtre reponse ici." rows="5" cols="100" required></textarea>';
      echo '<br /><button type="submit" class="btn btn-primary">Repondre</button>';
      echo '</form>';
      echo '</div>';
      if($_SESSION['droit'] == 1)
      echo '<a href="../controller/supprimerQRU.php?id='.$question->getID().'&value=0 ><button type="submit" class="btn btn-danger"> supprimer la question</button></a>';
      echo'</div>';
      echo '<br />';
    }
    
  } 
  ?>
\end{minted}

%-------------------------------------------------------------------------------
% Interface admin
%-------------------------------------------------------------------------------
\section{L'interface Admin}


%-------------------------------------------------------------------------------
% La livraison
%-------------------------------------------------------------------------------
\section{Livraison du produit}

\subsection{structure de l'archive de livraison}

\subsection{L'installation}
%-------------------------------------------------------------------------------
% Conclusion
%-------------------------------------------------------------------------------
\section{Conclusion du projet}

\end{document}
